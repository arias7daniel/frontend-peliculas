<h1 class="text-center">Crear Pelicula</h1>
<hr />
<form [formGroup]="myForm" (ngSubmit)="onSave()">
  <div class="d-flex gap-3">
    <div class="form-floating w-100">
      <input
        type="text"
        class="form-control"
        id="floatingInput"
        placeholder=""
        formControlName="nombre"
      />
      <label for="floatingInput">Nombre* </label>
    </div>
    <div class="form-floating w-100">
      <input
        type="date"
        class="form-control"
        id="floatingInputCalendar"
        placeholder=""
        formControlName="fechaEstreno"
      />
      <label for="floatingInputCalendar">Fecha de estreno* </label>
    </div>
  </div>
  <div class="form-floating mt-3">
    <textarea
      class="form-control"
      placeholder="Leave a comment here"
      id="floatingTextarea"
      style="height: 200px"
      formControlName="descripcion"
    ></textarea>
    <label for="floatingTextarea">Descripci√≥n*</label>
  </div>
  <div class="form-floating w-100 mt-3">
    <input
      type="text"
      class="form-control"
      id="floatingInputImagen"
      placeholder=""
      formControlName="imagen"
    />
    <label for="floatingInputImagen">Url Imagen* </label>
  </div>
  <div class="d-flex gap-3">
    <div class="form-floating w-100 mt-3">
      <input
        type="number"
        class="form-control"
        id="floatingInputTaquilla"
        placeholder=""
        formControlName="taquilla"
      />
      <label for="floatingInputTaquilla">Taquilla* </label>
    </div>
    <div class="form-floating w-100 mt-3">
      <select
        class="form-select"
        aria-label="Default select example"
        id="floatingInputCines"
        formControlName="enCines"
      >
        <option value="" selected>--seleccionar--</option>
        @for (dato of datosSeleccion; track $index) {
        <option [value]="dato">{{ dato }}</option>
        }
      </select>
      <label for="floatingInputCines">En cines* </label>
    </div>
  </div>
  <div class="form-floating w-100 mt-3">
    <input
      type="text"
      class="form-control"
      id="floatingInputTrailer"
      placeholder=""
      formControlName="trailer"
    />
    <label for="floatingInputTrailer">Url trailer* </label>
  </div>
  <div class="form-floating w-100 mt-3">
    <input
      type="text"
      class="form-control"
      id="floatingInputPoster"
      placeholder=""
      formControlName="poster"
    />
    <label for="floatingInputPoster">Url poster* </label>
  </div>

  <div class="mt-3">
    <label class="mb-3">Actores: </label>
    <div class="d-flex flex-wrap gap-3">
      @for (genero of generosApi; track $index) {
      <div class="form-check">
        <input
          class="form-check-input"
          type="checkbox"
          [value]="genero.nombre"
          [id]="genero._id"
          (click)="verificarGeneros(genero)"
        />
        <label class="form-check-label" [for]="genero._id">
          {{ genero.nombre }}
        </label>
      </div>
      }@empty {
      <div class="alert alert-warning w-100 text-center" role="alert">
        No hay actores!
      </div>
      }
    </div>
  </div>

  <div class="mt-3">
    <label class="mb-3">Actores: </label>
    <div class="d-flex flex-wrap gap-3">
      @for (actor of actores; track $index) {
      <div class="form-check">
        <input
          class="form-check-input"
          type="checkbox"
          [value]="actor.nombre"
          [id]="actor._id"
          (click)="verificarActores(actor)"
        />
        <label class="form-check-label" [for]="actor._id">
          {{ actor.nombre }}
        </label>
      </div>
      }@empty {
      <div class="alert alert-warning w-100 text-center" role="alert">
        No hay actores!
      </div>
      }
    </div>
  </div>
  @if (invalido === 'incompleto') {
  <div
    class="alert alert-danger d-flex align-items-center justify-content-center text-center mt-3"
    role="alert"
  >
    <div>Complete todos los campos</div>
  </div>
  }@else if(invalido === 'guardar'){
  <div
    class="alert alert-success d-flex align-items-center justify-content-center text-center mt-3"
    role="alert"
  >
    <div>Pelicula creada correctamente</div>
  </div>
  }
  <div class="d-flex justify-content-end mt-3">
    <button type="submit" class="btn btn-success fs-5 fw-bold">Crear</button>
  </div>
</form>
